@inject IUriHelper UriHelper
@inject AppState AppState

<AuthorizeView Context="AuthorizeContext">
    <Authorized>
        <div class="drawer-profile">
            <MatIconButton Icon="@MatIconNames.Account_circle" Link="@ProfileLink" ></MatIconButton>
            <span class="miniHover"><b><a href="@ProfileLink">@Model.User.UserName</a></b></span>
        </div>
    </Authorized>
</AuthorizeView>

@functions 
{
    [CascadingParameter] Task<AuthenticationState> AuthenticationStateTask  { get; set; }

    UserResponseViewModel Model { get; set; }
    string ProfileLink => "/account/profile";

    protected override async Task OnParametersSetAsync()
    {
        var user = (await AuthenticationStateTask).User;

        if (user.Identity.IsAuthenticated)
        {
            Model = await AppState.UserDetails();
        }
    }
}