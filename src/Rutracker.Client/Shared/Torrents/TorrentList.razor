@inject ViewSettings ViewSettings

@if (Items == null)
{
    <LoadingBackground>
        <span>Loading torrents, please wait...</span>
    </LoadingBackground>
}
else if (Items.Length == 0)
{
    <LoadingBackground ShowLoader="false">
        <span>Sorry, but torrent list is empty...</span>
    </LoadingBackground>
}
else
{
    <MatTable Items="@Items"
              Class="mat-elevation-z10 mt-3"
              PageSize="@PageSize"
              ShowPaging="false"
              LoadInitialData="false">
        <MatTableHeader>
            <th>Register at</th>
            <th>Size (bytes)</th>
            <th>Title</th>
        </MatTableHeader>
        <MatTableRow Context="torrent">
            <td title="@torrent.Date.ToShortDateString()">
                @torrent.Date.ToShortDateString()
            </td>

            <td title="@torrent.Size">
                @torrent.Size
            </td>

            <td title="@torrent.Title">
                <a href="@TorrentDetailsUri(torrent.Id)">
                    @torrent.Title
                </a>
            </td>
        </MatTableRow>
    </MatTable>
}

@functions
{
    [Parameter] TorrentItemViewModel[] Items { get; set; }
    [Parameter] int PageSize { get; set; }

    static string TorrentDetailsUri(long id) => $"/torrent/{id}";
}