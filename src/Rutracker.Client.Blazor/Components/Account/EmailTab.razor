<MatTab>
    <LabelContent>Email</LabelContent>
    <ChildContent>
        <EditForm Model="@ChangeEmailModel" OnValidSubmit="@ChangeClicked">
            <div class="form-group">
                <DataAnnotationsValidator />
                <ValidationSummary />
            </div>

            <div class="form-group">
                <MatTextField @bind-Value="@ChangeEmailModel.Email"
                              Label="Email"
                              Icon="@MatIconNames.Mail_outline"
                              IconTrailing="true"
                              FullWidth="true" />
            </div>

            <div class="form-group mt-4 d-flex justify-content-end">
                <MatButton Label="Change email" Raised="true" type="submit" />
            </div>
        </EditForm>
    </ChildContent>
</MatTab>

@code
{
    [Parameter] public string Email { get; set; }
    [Parameter] public EventCallback<ChangeEmailViewModel> OnChange { get; set; }

    private ChangeEmailViewModel ChangeEmailModel { get; set; } = new ChangeEmailViewModel();

    protected override void OnParametersSet() => ChangeEmailModel.Email = Email;

    private async Task ChangeClicked()
    {
        if (Email == ChangeEmailModel.Email) return;

        await OnChange.InvokeAsync(ChangeEmailModel);
    }
}