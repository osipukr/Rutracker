@inject IModalService ModalService

<MatTab>
    <LabelContent>Info</LabelContent>
    <ChildContent>
        <div class="form-group">
            <MatTextField Value="@UserModel.UserName"
                          Label="User Name"
                          Icon="@MatIconNames.Person"
                          IconTrailing="true"
                          FullWidth="true"
                          ReadOnly="true" />
        </div>

        <div class="form-group">
            <MatTextField Value="@UserModel.Email"
                          Label="User Name"
                          Icon="@MatIconNames.Mail_outline"
                          IconTrailing="true"
                          FullWidth="true"
                          ReadOnly="true" />
        </div>

        <div class="form-group">
            <MatTextField Value="@UserModel.PhoneNumber"
                          Label="Phone number"
                          Icon="@MatIconNames.Phone"
                          IconTrailing="true"
                          FullWidth="true"
                          ReadOnly="true" />
        </div>

        <div class="form-group">
            <MatTextField Value="@UserModel.FirstName" Label="User Name" FullWidth="true" ReadOnly="true" />
        </div>

        <div class="form-group">
            <MatTextField Value="@UserModel.LastName" Label="User Name" FullWidth="true" ReadOnly="true" />
        </div>

        <div class="form-group mt-4 d-flex justify-content-end">
            <MatButton OnClick="@ChangeModalOpened" Label="Edit profile" Raised="true" />
        </div>
    </ChildContent>
</MatTab>

@code
{
    [Parameter] public UserDetailsViewModel UserModel { get; set; }
    [Parameter] public EventCallback<ChangeUserViewModel> OnChange { get; set; }

    private void ChangeModalOpened()
    {
        var parameters = new ModalParameters();

        parameters.Add(nameof(ChangeUserViewModel), new ChangeUserViewModel
        {
            FirstName = UserModel.FirstName,
            LastName = UserModel.LastName
        });

        ModalService.OnClose += ChangeModalClosed;
        ModalService.Show("Change user information", typeof(UserInfoChangeModal), parameters);
    }

    private async void ChangeModalClosed(ModalResult result)
    {
        if (!result.Cancelled && result.Data is ChangeUserViewModel model)
        {
            await OnChange.InvokeAsync(model);
        }

        ModalService.OnClose -= ChangeModalClosed;
    }
}