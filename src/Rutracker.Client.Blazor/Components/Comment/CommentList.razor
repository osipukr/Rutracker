<div class="container pt-3">
    <div class="row m-0 mb-3">
        <AuthorizeView>
            <NotAuthorized>
                <div class="alert alert-success w-100">
                    <a href="@Constants.Path.Login">Log in</a> to post a message.
                </div>
            </NotAuthorized>
            <Authorized>
                <CommentCreate OnCreate="@OnCreate" />
            </Authorized>
        </AuthorizeView>
    </div>

    <div class="row m-0">
        <section id="comments" class="comment-list w-100">
            @if (Items == null)
            {
                <p>Loading comments...</p>
            }
            else
            {
                foreach (var comment in Items)
                {
                    <Comment Model="@comment" OnLike="@OnLike" OnUpdate="@OnUpdate" OnDelete="@OnDelete" />
                }
            }
        </section>
    </div>
</div>


@code
{
    [Parameter] public IEnumerable<CommentViewModel> Items { get; set; }
    [Parameter] public EventCallback<CommentCreateViewModel> OnCreate { get; set; }
    [Parameter] public Func<CommentViewModel, CommentUpdateViewModel, Task> OnUpdate { get; set; }
    [Parameter] public EventCallback<int> OnDelete { get; set; }
    [Parameter] public EventCallback<int> OnLike { get; set; }
}