<h1 class="my-3">Categories list</h1>

<MatTable Items="@Items" Class="mat-elevation-z5">
    <MatTableHeader>
        <th></th>
        <th>Id</th>
        <th>Count</th>
        <th>Name</th>
    </MatTableHeader>
    <MatTableRow>
        <td>
            <MatIconButton Icon="@MatIconNames.Delete" OnClick="@(_ => Deleted(context))" />
        </td>
        <td>@context.Id</td>
        <td>@context.Subcategories.Length</td>
        <td>
            <a class="text-dark" href="@CategoryDetailsLink(context.Id)">@context.Name</a>
        </td>
    </MatTableRow>
</MatTable>

@code
{
    [Parameter] private IEnumerable<CategoryViewModel> Items { get; set; }
    [Parameter] private EventCallback<CategoryViewModel> DeleteClicked { get; set; }

    private async Task Deleted(CategoryViewModel model) => await DeleteClicked.InvokeAsync(model);

    private static string CategoryDetailsLink(int id) => string.Format(Constants.Path.Category, id.ToString());
}
