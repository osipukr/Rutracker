@inject ITorrentService TorrentService

@page "/torrents/popular"

<Page Title="torrent list" Action="@LoadResult" Errors="@Errors">
    <TorrentList Items="@Torrents" />
</Page>

@code
{
    private IEnumerable<TorrentViewModel> Torrents { get; set; }
    private int Count => ViewSettings.PopularTorrentsCount;

    protected override async Task OnInitializedAsync() => await LoadAsync(TorrentsAsync);

    private async Task TorrentsAsync() => Torrents = await TorrentService.PopularTorrentsAsync(Count);
}