<MatTab>
    <LabelContent>Changed Password</LabelContent>
    <ChildContent>
        <EditForm Model="@ChangePasswordModel" OnValidSubmit="@ChangeClicked">
            <DataAnnotationsValidator />

            <div class="form-group">
                <MatTextField @bind-Value="@ChangePasswordModel.OldPassword"
                              Label="Old password"
                              Icon="@MatIconNames.Lock_open"
                              IconTrailing="true"
                              FullWidth="true"
                              Required="true"
                              type="password" />

                <ValidationMessage For="@(() => ChangePasswordModel.OldPassword)" />
            </div>

            <div class="form-group">
                <MatTextField @bind-Value="@ChangePasswordModel.NewPassword"
                              Label="New password"
                              Icon="@MatIconNames.Lock_open"
                              IconTrailing="true"
                              FullWidth="true"
                              Required="true"
                              type="password" />

                <ValidationMessage For="@(() => ChangePasswordModel.NewPassword)" />
            </div>

            <div class="form-group">
                <MatTextField @bind-Value="@ChangePasswordModel.ConfirmNewPassword"
                              Label="Confirm new password"
                              Icon="@MatIconNames.Lock_open"
                              IconTrailing="true"
                              FullWidth="true"
                              Required="true"
                              type="password" />

                <ValidationMessage For="@(() => ChangePasswordModel.ConfirmNewPassword)" />
            </div>

            <div class="d-flex flex-row-reverse mt-4">
                <MatButton Label="Change password" Raised="true" type="submit" />
            </div>
        </EditForm>
    </ChildContent>
</MatTab>

@code
{
    [Parameter] public EventCallback<ChangePasswordViewModel> OnChange { get; set; }

    private ChangePasswordViewModel ChangePasswordModel { get; set; } = new ChangePasswordViewModel();

    protected override void OnParametersSet()
    {
        ChangePasswordModel.OldPassword = null;
        ChangePasswordModel.NewPassword = null;
        ChangePasswordModel.ConfirmNewPassword = null;
    }

    private async Task ChangeClicked() => await OnChange.InvokeAsync(ChangePasswordModel);
}