@inject ITorrentService TorrentService

@page "/torrents/popular"

<Page Action="@LoadAction" Errors="@Errors">
    <div class="container">
        <TorrentList Items="@Torrents" />
    </div>
</Page>

@code
{
    private IEnumerable<TorrentViewModel> Torrents { get; set; }
    private int Count => ViewSettings.PopularTorrentsCount;

    protected override async Task OnInitializedAsync() => await LoadAsync(TorrentsAsync);

    private async Task TorrentsAsync() => Torrents = await TorrentService.PopularAsync(Count);
}